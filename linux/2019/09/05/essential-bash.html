<p><img src="https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1934&amp;q=80" alt="Example image" /></p>

<h2 id="shell"><strong>Shell</strong></h2>

<p>Several layers of events take place whenever a Linux command is entered into the terminal. The top layer of that is known as <em>shell</em>.</p>

<blockquote>
  <p>A shell is any user interface to the UNIX operating system, i.e., any program that takes input from the user, translates it into instructions that the operating system can understand, and conveys the operating system’s output back to the user.</p>
</blockquote>

<p>Let’s look at an example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sort</span> <span class="nt">-n</span> src/files/numbers.txt <span class="o">&gt;</span> src/files/sorted_numbers.txt
</code></pre></div></div>

<p>This command will perform the following tasks:</p>

<ul>
  <li>Go to the <code class="highlighter-rouge">src/files</code> directory</li>
  <li>Sort the numbers in the <code class="highlighter-rouge">numbers.txt</code> files in ascending order</li>
  <li>Save the result in a new file called <code class="highlighter-rouge">sorted_numbers.txt</code> in the same directory</li>
</ul>

<h2 id="history"><strong>History</strong></h2>

<p>The first major shell was the Bourne shell (named after its inventor, Steven Bourne); it was included in the first popular version of UNIX, Version 7, starting in 1979. The Bourne shell is known on the system as <code class="highlighter-rouge">sh</code>. Although UNIX has gone through many, many changes, the Bourne shell is still popular and essentially unchanged. Several UNIX utilities and administration features depend on it.</p>

<p>Variants of some popular shells:</p>

<ul>
  <li>C Shell or <code class="highlighter-rouge">csh</code> (The syntax has resemblance with C programming language)</li>
  <li>Korn Shell or <code class="highlighter-rouge">ksh</code> (Similar to Bourne Shell with features from both Bourne and C Shell)</li>
  <li>The Bourne Again Shell or BASH (Started with the GNU project in 1988.)</li>
</ul>

<p>BASH is going to be our primary focus here.</p>

<h2 id="a-few-basic-commands"><strong>A Few Basic Commands</strong></h2>

<p>List of most frequently used commands. All of these commands can be run directly from a bash command prompt:</p>

<ul>
  <li><code class="highlighter-rouge">cd</code></li>
  <li><code class="highlighter-rouge">ls</code></li>
  <li><code class="highlighter-rouge">cat</code></li>
  <li><code class="highlighter-rouge">cp</code></li>
  <li><code class="highlighter-rouge">mv</code></li>
  <li><code class="highlighter-rouge">mkdir</code></li>
  <li><code class="highlighter-rouge">rm</code></li>
  <li><code class="highlighter-rouge">grep</code></li>
  <li><code class="highlighter-rouge">lp</code></li>
</ul>

<p>All of the following command summaries can be found via:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl cheat.sh/&lt;prompt&gt;
</code></pre></div></div>
<h3 id="cd"><strong>cd</strong></h3>

<p><code class="highlighter-rouge">cd</code> is used to change directory</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Go to the given directory</span>
<span class="nb">cd </span>path/to/directory

<span class="c">#Go to home directory of current user</span>
<span class="nb">cd</span>

<span class="c">#Go up to the parent of the current directory</span>
<span class="nb">cd</span> ..

<span class="c">#Go to the previously chosen directory</span>
<span class="nb">cd</span> -
</code></pre></div></div>

<h3 id="ls"><strong>ls</strong></h3>

<p><code class="highlighter-rouge">ls</code> lists all the files and folders in a user-specified directory</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Displays everything in the target directory</span>
<span class="nb">ls </span>path/to/the/target/directory

<span class="c"># Displays everything including hidden files</span>
<span class="nb">ls</span> <span class="nt">-a</span>

<span class="c"># Displays all files, along with the size (with unit suffixes) and timestamp</span>
<span class="nb">ls</span> <span class="nt">-lh</span>

<span class="c"># Display files, sorted by size</span>
<span class="nb">ls</span> <span class="nt">-S</span>

<span class="c"># Display directories only</span>
<span class="nb">ls</span> <span class="nt">-d</span> <span class="k">*</span>/

<span class="c"># Display directories only, include hidden</span>
<span class="nb">ls</span> <span class="nt">-d</span> .<span class="k">*</span>/ <span class="k">*</span>/
</code></pre></div></div>

<h3 id="cat"><strong>cat</strong></h3>

<p><code class="highlighter-rouge">cat</code> shows the contents of a user-specified file</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Display the contents of a file</span>
<span class="nb">cat</span> /path/to/foo

<span class="c"># Display contents with line numbers</span>
<span class="nb">cat</span> <span class="nt">-n</span> /path/to/foo

<span class="c"># Display contents with line numbers (blank lines excluded)</span>
<span class="nb">cat</span> <span class="nt">-b</span> /path/to/foo
</code></pre></div></div>

<h3 id="cp"><strong>cp</strong></h3>

<p><code class="highlighter-rouge">cp</code> copies files or folders from one directory to another</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a copy of a file</span>
<span class="nb">cp</span> ~/Desktop/foo.txt ~/Downloads/foo.txt

<span class="c"># Create a copy of a directory</span>
<span class="nb">cp</span> <span class="nt">-r</span> ~/Desktop/cruise_pics/ ~/Pictures/

<span class="c"># Create a copy but ask to overwrite if the destination file already exists</span>
<span class="nb">cp</span> <span class="nt">-i</span> ~/Desktop/foo.txt ~/Documents/foo.txt

<span class="c"># Create a backup file with date</span>
<span class="nb">cp </span>foo.txt<span class="o">{</span>,.<span class="s2">"</span><span class="si">$(</span><span class="nb">date</span> +%Y%m%d-%H%M%S<span class="si">)</span><span class="s2">"</span><span class="o">}</span>
</code></pre></div></div>

<h3 id="mv"><strong>mv</strong></h3>

<p><code class="highlighter-rouge">mv</code> moves files or folders from one directory to another and can also be used to rename files or folders</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Move a file from one place to another</span>
<span class="nb">mv</span> ~/Desktop/foo.txt ~/Documents/foo.txt

<span class="c"># Move a file from one place to another and automatically overwrite if the destination file exists</span>
<span class="c"># (This will override any previous -i or -n args)</span>
<span class="nb">mv</span> <span class="nt">-f</span> ~/Desktop/foo.txt ~/Documents/foo.txt

<span class="c"># Move a file from one place to another but ask before overwriting an existing file</span>
<span class="c"># (This will override any previous -f or -n args)</span>
<span class="nb">mv</span> <span class="nt">-i</span> ~/Desktop/foo.txt ~/Documents/foo.txt

<span class="c"># Move a file from one place to another but never overwrite anything</span>
<span class="c"># (This will override any previous -f or -i args)</span>
<span class="nb">mv</span> <span class="nt">-n</span> ~/Desktop/foo.txt ~/Documents/foo.txt

<span class="c"># Move listed files to a directory</span>
<span class="nb">mv</span> <span class="nt">-t</span> ~/Desktop/ file1 file2 file3
</code></pre></div></div>

<h3 id="mkdir"><strong>mkdir</strong></h3>

<p><code class="highlighter-rouge">mkdir</code> is used to create a folder in a directory</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create a directory and all its parents</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> foo/bar/baz

<span class="c"># Create foo/bar and foo/baz directories</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> foo/<span class="o">{</span>bar,baz<span class="o">}</span>

<span class="c"># Create the foo/bar, foo/baz, foo/baz/zip and foo/baz/zap directories</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> foo/<span class="o">{</span>bar,baz/<span class="o">{</span>zip,zap<span class="o">}}</span>
</code></pre></div></div>

<h3 id="rm"><strong>rm</strong></h3>

<p><code class="highlighter-rouge">rm</code> is mainly used to delete files or folders</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Remove files and subdirs</span>
<span class="nb">rm</span> <span class="nt">-rf</span> path/to/the/target/

<span class="c"># Ignore non existent files</span>
<span class="nb">rm</span> <span class="nt">-f</span> path/to/the/target

<span class="c"># Remove a file with his inode</span>
find /tmp/ <span class="nt">-inum</span> 6666 <span class="nt">-exec</span> <span class="nb">rm</span> <span class="nt">-i</span> <span class="s1">'{}'</span> <span class="se">\;</span>
</code></pre></div></div>

<h3 id="grep"><strong>grep</strong></h3>

<p><code class="highlighter-rouge">grep</code> can be used to search through the output of another command</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Search a file for a pattern</span>
<span class="nb">grep </span>pattern file

<span class="c"># Case insensitive search (with line numbers)</span>
<span class="nb">grep</span> <span class="nt">-in</span> pattern file

<span class="c"># Recursively grep for string &lt;pattern&gt; in folder:</span>
<span class="nb">grep</span> <span class="nt">-R</span> pattern folder

<span class="c"># Read search patterns from a file (one per line)</span>
<span class="nb">grep</span> <span class="nt">-f</span> pattern_file file

<span class="c"># Find lines NOT containing pattern</span>
<span class="nb">grep</span> <span class="nt">-v</span> pattern file

<span class="c"># You can grep with regular expressions</span>
<span class="nb">grep</span> <span class="s2">"^00"</span> file  <span class="c">#Match lines starting with 00</span>
<span class="nb">grep</span> <span class="nt">-E</span> <span class="s2">"[0-9]{1,3}</span><span class="se">\.</span><span class="s2">[0-9]{1,3}</span><span class="se">\.</span><span class="s2">[0-9]{1,3}</span><span class="se">\.</span><span class="s2">[0-9]{1,3}"</span> file  <span class="c">#Find IP add</span>

<span class="c"># Find all files which match {pattern} in {directory}</span>
<span class="c"># This will show: "file:line my research"</span>
<span class="nb">grep</span> <span class="nt">-rnw</span> <span class="s1">'directory'</span> <span class="nt">-e</span> <span class="s2">"pattern"</span>

<span class="c"># Exclude grep from your grepped output of ps.</span>
<span class="c"># Add [] to the first letter. Ex: sshd -&gt; [s]shd</span>
ps aux | <span class="nb">grep</span> <span class="s1">'[h]ttpd'</span>

<span class="c"># Colour in red {bash} and keep all other lines</span>
ps aux | <span class="nb">grep</span> <span class="nt">-E</span> <span class="nt">--color</span> <span class="s1">'bash|$'</span>
</code></pre></div></div>

<h3 id="lp"><strong>lp</strong></h3>

<p><code class="highlighter-rouge">lp</code> prints the specified output via an available printer</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># lp</span>
<span class="c"># Print files.</span>

<span class="c"># Print the output of a command to the default printer (see `lpstat` command):</span>
<span class="nb">echo</span> <span class="s2">"test"</span> | lp

<span class="c"># Print a file to the default printer:</span>
lp path/to/filename

<span class="c"># Print a file to a named printer (see `lpstat` command):</span>
lp <span class="nt">-d</span> printer_name path/to/filename

<span class="c"># Print N copies of a file to the default printer (replace N with the desired number of copies):</span>
lp <span class="nt">-n</span> N path/to/filename

<span class="c"># Print only certain pages to the default printer (print pages 1, 3-5, and 16):</span>
lp <span class="nt">-P</span> 1,3-5,16 path/to/filename

<span class="c"># Resume printing a job:</span>
lp <span class="nt">-i</span> job_id <span class="nt">-H</span> resume
</code></pre></div></div>

<h3 id="clear"><strong>clear</strong></h3>

<p><code class="highlighter-rouge">clear</code> is used to clear the CLI window</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># clear</span>
<span class="c"># Clears the screen of the terminal.</span>

<span class="c"># Clear the screen (equivalent to typing Control-L when using the bash shell):</span>
clear
</code></pre></div></div>

<h3 id="exit"><strong>exit</strong></h3>

<p><code class="highlighter-rouge">exit</code> closes the CLI window</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># exit</span>
<span class="c"># Quit the current CMD instance or the current batch file.</span>
<span class="c"># More information:</span>
<span class="c">#&lt;https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/exit&gt;.</span>

<span class="c"># Quit the current CMD instance:</span>
<span class="nb">exit</span>

<span class="c"># Quit the current batch script:</span>
<span class="nb">exit</span> /b

<span class="c"># Quit using a specific exit code:</span>
<span class="nb">exit </span>exit_code
</code></pre></div></div>

<h2 id="basic-scripting-examples"><strong>Basic Scripting Examples</strong></h2>

<p>When you need to execute multiple shell commands sequentially or want to do more complex stuffs, it’s better to enclose the commands in a bash script.</p>

<h3 id="running-a-shell-script"><strong>Running a Shell Script</strong></h3>

<ul>
  <li>
    <p>Create a file with <code class="highlighter-rouge">.sh</code> extension. I have used Ubuntu’s built-in <code class="highlighter-rouge">nano</code> editor for that.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ nano script.sh
</code></pre></div>    </div>
  </li>
  <li>Put your code in the <code class="highlighter-rouge">.sh</code> file</li>
  <li>
    <p>Make sure you put the shebang <code class="highlighter-rouge"><span class="c">#!/bin/bash</span></code> at the beginning of each script, otherwise, the system wouldn’t know which interpreter to use.</p>
  </li>
  <li>
    <p>Give permission to run:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ chmod +x script.sh
</code></pre></div>    </div>
  </li>
  <li>
    <p>Run the script via:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ ./script
</code></pre></div>    </div>
  </li>
  <li>
    <p>If the script takes in one or multiple arguments, then place those with spaces in between.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ ./script arg1 arg2
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="conditionals-if-else"><strong>conditionals (if-else)</strong></h3>

<ul>
  <li><strong>Example-1:</strong> This program,
    <ul>
      <li>Takes in two integers as arguments</li>
      <li>Compares if one number is greater than the other or if they are equal</li>
      <li>Returns the greater of the two numbers or if they are equal, returns equal</li>
    </ul>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/bin/bash</span>

  <span class="c"># bash strict mode for easier debugging</span>
  <span class="nb">set</span> <span class="nt">-euo</span> pipefail

  <span class="nv">number1</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
  <span class="nv">number2</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span>
  <span class="k">if</span> <span class="o">[</span> <span class="nv">$number1</span> <span class="nt">-eq</span> <span class="nv">$number2</span> <span class="o">]</span>
  <span class="k">then
      </span><span class="nb">echo</span> <span class="s2">"The numbers are equal"</span>

  <span class="k">elif</span> <span class="o">[</span> <span class="nv">$number1</span> <span class="nt">-gt</span> <span class="nv">$number2</span> <span class="o">]</span>
  <span class="k">then
      </span><span class="nb">echo</span> <span class="s2">"The greater number is </span><span class="nv">$number1</span><span class="s2">"</span>

  <span class="k">elif</span> <span class="o">[</span> <span class="nv">$number2</span> <span class="nt">-gt</span> <span class="nv">$number1</span> <span class="o">]</span>
  <span class="k">then
      </span><span class="nb">echo</span> <span class="s2">"The greater number is </span><span class="nv">$number2</span><span class="s2">"</span>
  <span class="k">fi</span>
</code></pre></div>    </div>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ ./script.sh 12 13
  The greater number is 13
</code></pre></div>    </div>
  </li>
  <li><strong>Example-2:</strong> This program,
    <ul>
      <li>Takes a single number as an argument</li>
      <li>Checks whether the number is Odd or Even</li>
      <li>Returns Odd or Even accordingly</li>
    </ul>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/bin/bash</span>

  <span class="c"># bash strict mode for easier debugging</span>
  <span class="nb">set</span> <span class="nt">-euo</span> pipefail

  <span class="nv">number</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
  <span class="k">if</span> <span class="o">[</span> <span class="k">$((</span> number%2 <span class="k">))</span> <span class="nt">-eq</span> 0 <span class="o">]</span>
  <span class="k">then
      </span><span class="nb">echo</span> <span class="s2">"Even"</span>
  <span class="k">else
      </span><span class="nb">echo</span> <span class="s2">"Odd"</span>
  <span class="k">fi</span>
</code></pre></div>    </div>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ ./script.sh 20
  Even
</code></pre></div>    </div>
  </li>
  <li><strong>Example-3:</strong> This program,
    <ul>
      <li>Takes in two integers and an operation instruction</li>
      <li>Returns the value according to the operation</li>
    </ul>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/bin/bash</span>

  <span class="c"># bash strict mode for easier debugging</span>
  <span class="nb">set</span> <span class="nt">-euo</span> pipefail

  <span class="nb">echo</span> <span class="s2">"Enter two numbers and the intended operation:
  * for addition, write add
  * for subtraction, write sub
  * for multiplication, write mul
  * for division, write div

  (write quit to quit the program)"</span>

  <span class="nv">num1</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
  <span class="nv">num2</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span>
  <span class="nv">operation</span><span class="o">=</span><span class="s2">"</span><span class="nv">$3</span><span class="s2">"</span>

  <span class="k">if</span> <span class="o">[</span> <span class="nv">$num1</span> <span class="o">==</span> <span class="s2">"quit"</span> <span class="o">]</span>
  <span class="k">then
      </span><span class="nb">break

      </span><span class="k">elif</span> <span class="o">[</span> <span class="nv">$operation</span> <span class="o">==</span> <span class="s2">"add"</span> <span class="o">]</span>
      <span class="k">then
          </span><span class="nv">ans</span><span class="o">=</span><span class="k">$((</span> <span class="nv">$num1</span> <span class="o">+</span> <span class="nv">$num2</span> <span class="k">))</span>
          <span class="nb">echo</span> <span class="s2">"addition: </span><span class="nv">$ans</span><span class="s2">"</span>

      <span class="k">elif</span> <span class="o">[</span> <span class="nv">$operation</span> <span class="o">==</span> <span class="s2">"sub"</span> <span class="o">]</span>
      <span class="k">then
          </span><span class="nv">ans</span><span class="o">=</span><span class="k">$((</span> <span class="nv">$num1</span> <span class="o">-</span> <span class="nv">$num2</span> <span class="k">))</span>
          <span class="nb">echo</span> <span class="s2">"subtraction: </span><span class="nv">$ans</span><span class="s2">"</span>

      <span class="k">elif</span> <span class="o">[</span> <span class="nv">$operation</span> <span class="o">==</span> <span class="s2">"mul"</span> <span class="o">]</span>
      <span class="k">then
          </span><span class="nv">ans</span><span class="o">=</span><span class="k">$((</span> <span class="nv">$num1</span> <span class="o">*</span> <span class="nv">$num2</span> <span class="k">))</span>
          <span class="nb">echo</span> <span class="s2">"multiplication: </span><span class="nv">$ans</span><span class="s2">"</span>

      <span class="k">elif</span> <span class="o">[</span> <span class="nv">$operation</span> <span class="o">==</span> <span class="s2">"div"</span> <span class="o">]</span>
      <span class="k">then
          </span><span class="nv">ans</span><span class="o">=</span><span class="k">$((</span> <span class="nv">$num1</span> <span class="o">/</span> <span class="nv">$num2</span> <span class="k">))</span>
          <span class="nb">echo</span> <span class="s2">"division: </span><span class="nv">$ans</span><span class="s2">"</span>

  <span class="k">fi</span>
</code></pre></div>    </div>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ ./script.sh 12 13 add
  25
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="for-loop"><strong>for loop</strong></h3>

<ul>
  <li>
    <p><strong>Example-1:</strong> Looping through 0 to 9 with increment 3 and printing the numbers</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/bin/bash</span>

  <span class="c"># bash strict mode for easier debugging</span>
  <span class="nb">set</span> <span class="nt">-euo</span> pipefail

  <span class="k">for </span>var <span class="k">in</span> <span class="o">{</span>0..9..3<span class="o">}</span>
  <span class="k">do
      </span><span class="nb">echo</span> <span class="nv">$var</span>
  <span class="k">done</span>
</code></pre></div>    </div>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ ./script.sh
  0
  3
  6
  9
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Example-2:</strong> Looping through files in a folder and printing them one by one</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/bin/bash</span>

  <span class="c"># bash strict mode for easier debugging</span>
  <span class="nb">set</span> <span class="nt">-euo</span> pipefail

  <span class="k">for </span>file <span class="k">in</span> <span class="si">$(</span><span class="nb">ls</span> ./files<span class="si">)</span>
  <span class="k">do
      </span><span class="nb">echo</span> <span class="nv">$file</span>
  <span class="k">done</span>
</code></pre></div>    </div>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ ./script.sh
  numbers.txt
  sorted_numbers.txt
</code></pre></div>    </div>
  </li>
  <li><strong>Example-3:</strong> This program,
    <ul>
      <li>Doesn’t take any argument</li>
      <li>Returns the summation of all the integers, starting from 0, up to 100</li>
    </ul>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/bin/bash</span>

  <span class="c"># bash strict mode for easier debugging</span>
  <span class="nb">set</span> <span class="nt">-euo</span> pipefail

  <span class="nb">sum</span><span class="o">=</span>0
  <span class="k">for </span>num <span class="k">in</span> <span class="si">$(</span><span class="nb">seq </span>0 100<span class="si">)</span>
  <span class="k">do
      </span><span class="nb">sum</span><span class="o">=</span><span class="k">$((</span><span class="nv">$sum</span> <span class="o">+</span> <span class="nv">$num</span><span class="k">))</span>
  <span class="k">done
  </span><span class="nb">echo</span> <span class="s2">"Total sum is </span><span class="nv">$sum</span><span class="s2">"</span>
</code></pre></div>    </div>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ ./script.sh
  Total sum is 5050
</code></pre></div>    </div>
  </li>
  <li><strong>Example-4:</strong> This program,
    <ul>
      <li>Takes in an integer as an argument</li>
      <li>Prints all the numbers up to that number, starting from 0</li>
    </ul>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/bin/bash</span>

  <span class="c"># bash strict mode for easier debugging</span>
  <span class="nb">set</span> <span class="nt">-euo</span> pipefail

  <span class="nv">input_number</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
  <span class="k">for </span>num <span class="k">in</span> <span class="si">$(</span><span class="nb">seq </span>0 <span class="nv">$input_number</span><span class="si">)</span>
  <span class="k">do
  if</span> <span class="o">[</span> <span class="nv">$num</span> <span class="nt">-lt</span> <span class="nv">$input_number</span> <span class="o">]</span>
  <span class="k">then
      </span><span class="nb">echo</span> <span class="nv">$num</span>
  <span class="k">fi
  done</span>
</code></pre></div>    </div>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ ./script.sh 100
  0
  1
  .
  .
  99
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="while-loop"><strong>while loop</strong></h3>

<ul>
  <li><strong>Example-1:</strong> This program,
    <ul>
      <li>Takes in a single integer as an argument</li>
      <li>Returns the factorial of that number</li>
    </ul>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/bin/bash</span>

  <span class="c"># bash strict mode for easier debugging</span>
  <span class="nb">set</span> <span class="nt">-euo</span> pipefail

  <span class="nv">counter</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
  <span class="nv">factorial</span><span class="o">=</span>1
  <span class="k">while</span> <span class="o">[</span> <span class="nv">$counter</span> <span class="nt">-gt</span> 0 <span class="o">]</span>
  <span class="k">do
  </span><span class="nv">factorial</span><span class="o">=</span><span class="k">$((</span> <span class="nv">$factorial</span> <span class="o">*</span> <span class="nv">$counter</span> <span class="k">))</span>
  <span class="nv">counter</span><span class="o">=</span><span class="k">$((</span> <span class="nv">$counter</span> <span class="o">-</span> <span class="m">1</span> <span class="k">))</span>
  <span class="k">done
  </span><span class="nb">echo</span> <span class="s2">"Factorial of </span><span class="nv">$1</span><span class="s2"> is </span><span class="nv">$factorial</span><span class="s2">"</span>
</code></pre></div>    </div>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ ./script.sh 5
  Factorial of 5 is 120
</code></pre></div>    </div>
  </li>
  <li><strong>Example-2:</strong> This program,
    <ul>
      <li>Takes two integers as arguments</li>
      <li>Returns the summation of the numbers</li>
      <li>Sending <code class="highlighter-rouge">-1</code> as an input quits the program</li>
    </ul>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="c"># bash strict mode for easier debugging</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="k">while</span> :
<span class="k">do
    </span><span class="nb">read</span> <span class="nt">-p</span> <span class="s2">"Enter two numbers ( - 1 to quit ) : "</span> <span class="s2">"a"</span> <span class="s2">"b"</span>
    <span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="nt">-eq</span> <span class="nt">-1</span> <span class="o">]</span>
    <span class="k">then
        </span><span class="nb">break
    </span><span class="k">fi
    </span><span class="nv">ans</span><span class="o">=</span><span class="k">$((</span> <span class="nv">$a</span> <span class="o">+</span> <span class="nv">$b</span> <span class="k">))</span>
    <span class="nb">echo</span> <span class="nv">$ans</span>
<span class="k">done</span>
</code></pre></div>    </div>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./script.sh
Enter two numbers (-1 to quit): 20 30
30
</code></pre></div>    </div>
  </li>
  <li><strong>Example-3:</strong> This program,
    <ul>
      <li>Takes in a text filepath as argument</li>
      <li>Reads and prints out each line of the file</li>
    </ul>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="c"># bash strict mode for easier debugging</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="nv">file</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>

<span class="k">while </span><span class="nb">read</span> <span class="nt">-r</span> line
<span class="k">do
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$line</span><span class="s2">"</span>
<span class="k">done</span> &lt; <span class="s2">"</span><span class="nv">$file</span><span class="s2">"</span>
</code></pre></div>    </div>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./script.sh files/numbers.txt
5
55
.
.
11
10
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="functions"><strong>functions</strong></h3>

<p>Functions are incredible tools when we need to reuse code. Creating functions are fairly straight
forward in bash.</p>

<ul>
  <li>
    <p><strong>Example-1:</strong> This function,</p>

    <ul>
      <li>Takes a directory as an input argument</li>
      <li>Counts the number of files in that directory and prints that out</li>
      <li>Note that this function ignores the dot files (The <code class="highlighter-rouge">ls -1</code> flag ignores dot files)</li>
    </ul>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/bin/bash</span>

  <span class="c"># bash strict mode for easier debugging</span>
  <span class="nb">set</span> <span class="nt">-euo</span> pipefail

  <span class="c"># declaring the function</span>
  file_count <span class="o">()</span> <span class="o">{</span>
      <span class="nb">ls</span> <span class="nt">-1</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> | <span class="nb">wc</span> <span class="nt">-l</span>
  <span class="o">}</span>

  <span class="c"># calling the function</span>
  <span class="nb">echo</span> <span class="si">$(</span> file_count <span class="nv">$1</span> <span class="si">)</span>
</code></pre></div>    </div>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ ./script.sh ./files
  $ 2
</code></pre></div>    </div>
  </li>
  <li><strong>Example-2:</strong> This function,
    <ul>
      <li>
        <p>Takes in a shortcode for any of the following languages
(a) <code class="highlighter-rouge">en</code> for English
(b) <code class="highlighter-rouge">fr</code> for French
(c) <code class="highlighter-rouge">bn</code> for bangla</p>
      </li>
      <li>
        <p>Returns a welcome message in the selected language</p>
      </li>
    </ul>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="c"># bash strict mode for easier debugging</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="c"># declaring the function</span>
greetings <span class="o">()</span> <span class="o">{</span>
    <span class="nv">language</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
    <span class="k">if</span> <span class="o">[</span> <span class="nv">$language</span> <span class="o">==</span> <span class="s2">"en"</span> <span class="o">]</span>
    <span class="k">then
        </span><span class="nb">echo</span> <span class="s2">"Greetings Mortals!"</span>
        <span class="k">elif</span> <span class="o">[</span> <span class="nv">$language</span> <span class="o">==</span> <span class="s2">"fr"</span> <span class="o">]</span>
        <span class="k">then
            </span><span class="nb">echo</span> <span class="s2">"Salutations Mortels!"</span>
        <span class="k">elif</span> <span class="o">[</span> <span class="nv">$language</span> <span class="o">==</span> <span class="s2">"bn"</span> <span class="o">]</span>
        <span class="k">then
            </span><span class="nb">echo</span> <span class="s2">"নশ্বরকে শুভেচ্ছা!"</span>
    <span class="k">fi</span>

<span class="o">}</span>

<span class="c"># calling the function</span>
<span class="nb">echo</span> <span class="si">$(</span> greetings <span class="nv">$1</span> <span class="si">)</span>
</code></pre></div>    </div>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./script.sh en
Greetings Mortals!
</code></pre></div>    </div>
  </li>
  <li><strong>Example-3:</strong> This function,
    <ul>
      <li>Takes a directory as an argument</li>
      <li>Loop through the files</li>
      <li>Only returns the text files with full path</li>
    </ul>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="c"># bash strict mode for easier debugging</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="c"># declaring the function</span>
return_text <span class="o">()</span> <span class="o">{</span>
<span class="nb">dir</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="k">for </span>file <span class="k">in</span> <span class="nv">$dir</span><span class="s2">"/*.txt"</span>
<span class="k">do
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="si">$(</span> <span class="nb">realpath</span> <span class="nv">$file</span> <span class="si">)</span><span class="s2">"</span>
<span class="k">done</span>

<span class="o">}</span>

<span class="nb">echo</span> <span class="s2">"</span><span class="si">$(</span> return_text <span class="nv">$1</span> <span class="si">)</span><span class="s2">"</span>
</code></pre></div>    </div>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./script.sh
/home/redowan/code/bash/files/numbers.txt
/home/redowan/code/bash/files/sorted_numbers.txt
</code></pre></div>    </div>
    <h2 id="some-good-practices"><strong>Some Good Practices</strong></h2>
  </li>
</ul>

<h3 id="use-a-bash-strict-mode"><strong>Use a Bash Strict Mode</strong></h3>
<p>Your bash scripts will be more robust, reliable and easy to debug if it starts with:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail
</code></pre></div></div>

<p>This can be regarded as an unofficial <strong>bash strict mode</strong> and often prevents many classes of sneaky bugs in your script. The above command can be synthesized into multiple commands.</p>

<p><code class="highlighter-rouge">set -euo pipefail</code> is short for:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set -e
set -u
set -o pipefail
</code></pre></div></div>
<p>Let’s have a look at each of them separately.</p>

<ul>
  <li>
    <p><strong>set-e:</strong> This instruction forces the bash script to exit immediately if any command has a non zero exit status. If there is an issue in any of the lines in your code, the subsequent lines simply won’t run.</p>
  </li>
  <li>
    <p><strong>set-u:</strong> If your code has a reference to any variable that wasn’t defined previously, this will cause the program to exit.</p>
  </li>
  <li>
    <p><strong>set -o pipefail:</strong> This setting prevents errors in a pipeline being masked. If any command in a pipeline fails, that return code will be used as the return code of the whole pipeline, not the last command’s return code.</p>
  </li>
</ul>

<p>For a more in depth explanation of the different settings and Bash Strict Mode in general, check out, <a href="http://redsymbol.net/articles/unofficial-bash-strict-mode/">AAron Maxwell’s blog</a> on this topic.</p>

<h3 id="double-quote-your-variables"><strong>Double Quote Your Variables</strong></h3>
<p>It is generally a good practice to double quote your variables, specially user input variables where spaces are involved.</p>

<h2 id="external-resources"><strong>External Resources</strong></h2>

<p>Here are some awesome sources where you can always look into if you get stuck:</p>

<ul>
  <li><a href="https://learnpythonthehardway.org/book/appendixa.html">Command Line Crash Course</a></li>
  <li><a href="https://ryanstutorials.net/bash-scripting-tutorial/">Ryans Bash Tutorial</a></li>
  <li><a href="https://www.w3schools.com/whatis/whatis_cli.asp">W3 School CLI Tutorial</a></li>
</ul>
